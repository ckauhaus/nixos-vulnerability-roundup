/// Interface to issue trackers.
///
/// Implements currently only GitHub issues.
use crate::ticket::Ticket;
use hubcaps::issues::IssueOptions;
use hubcaps::{Credentials, Github};
use snafu::Snafu;

#[derive(Debug, Snafu)]
pub enum Error {
    #[snafu(display("..."))]
    Connect { msg: String },
    #[snafu(display("GITHUB_TOKEN not found in either environment or .env file"))]
    Token,
    #[snafu(display("..."))]
    Issue { msg: String },
}

type Result<T, E = Error> = std::result::Result<T, E>;

pub struct Tracker {}

impl Tracker {
    pub fn connect_github(repo: &str, token: Option<&str>) -> Result<Self> {
        Ok(Self {})
    }

    pub fn create_issue(&self, tkt: &Ticket) -> Result<String> {
        Ok("12345".to_owned())
    }
}

pub fn github(user_repo: &str) -> Result<Tracker> {
    Ok(Tracker {})
}
